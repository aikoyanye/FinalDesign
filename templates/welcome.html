<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
    <script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
    <script src="static\all.js" type="text/javascript"></script>
    <title>景区游船管理系统-欢迎</title>
</head>
{% extends "header.html" %}

{% block main %}
<button onclick="MidInfo()" value="23333"></button>
<div id="mid">
    <!-- 交给react -->
    <div class="panel panel-default">
        <div class="panel-heading">
            <table style="table-layout:fixed">
                <tr>
                    <td style="width:33%"><h4><p id="activity">正在进行：</p></h4></td>
                    <td style="width:33%"><h4><p id="ship">空闲游船：</p></h4></td>
                    <td style="width:33%"><h4><p id="last">过去7天游玩数据：</p></h4></td>
                </tr>
            </table>
        </div>
        <div class="panel-body">
            <ul class="nav navbar-nav">
                <li>
                    <h4><div id="time" /></h4>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right" style="margin-right:20px">
                <h4>天气</h4>
            </ul>
        </div>
    </div>
</div>
<script type="text/babel">
function MidInfo(){
    $.ajax({
        url: "/mid",
        type: "POST",
        data: {weather:"0"},
        success: function(arg){
            var data = jQuery.parseJSON(arg);
            document.getElementById("activity").innerHTML = data.activity
            document.getElementById("ship").innerHTML = data.ship
            document.getElementById("last").innerHTML = data.last
            document.getElementById("time").innerHTML = "当前日期和时间：" + data.time
        }
    })
}

setInterval(MidInfo, 1000);
</script>

{% end %}
